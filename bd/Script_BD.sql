CREATE DATABASE POKEMON;

USE POKEMON;

CREATE TABLE POKEDEX(
	NUM_POKEDEX INT,
	NOM_POKEMON VARCHAR(20) NOT NULL,
	IMG_FRONTAL VARCHAR(20) NOT NULL,
	IMG_BACK VARCHAR(20) NOT NULL,
	SONIDO VARCHAR(20) NOT NULL,
	NIVEL_EVO INT,
	TIPO1 VARCHAR(20) NOT NULL,
	TIPO2 VARCHAR(20),
	CONSTRAINT POKEDEX_PK PRIMARY KEY (NUM_POKEDEX)
);

INSERT INTO POKEDEX VALUES(1,'BULBASAUR','1.png','1.png','1.wav',15,'PLANTA','VENENO');
INSERT INTO POKEDEX VALUES(2,'IVASAUR','2.png','2.png','2.wav',28,'PLANTA','VENENO');
INSERT INTO POKEDEX VALUES(3,'VENASAUR','3.png','3.png','3.wav',NULL,'PLANTA','VENENO');
INSERT INTO POKEDEX VALUES(4,'CHARMANDER','4.png','4.png','4.wav',15,'FUEGO',null);
INSERT INTO POKEDEX VALUES(5,'CHARMELEON','5.png','5.png','5.wav',25,'FUEGO',null);
INSERT INTO POKEDEX VALUES(6,'CHARIZARD','6.png','6.png','6.wav',NULL,'FUEGO','VOLADOR');
INSERT INTO POKEDEX VALUES(7,'SQUIRTLE','7.png','7.png','7.wav',15,'AGUA',null);
INSERT INTO POKEDEX VALUES(8,'WARTORTLE','8.png','8.png','8.wav',26,'AGUA',null);
INSERT INTO POKEDEX VALUES(9,'BLASTOISE','9.png','9.png','9.wav',NULL,'AGUA',null);
INSERT INTO POKEDEX VALUES(25,'PIKACHU','25.png','25.png','25.wav',30,'ELÉCTRICO',null);
INSERT INTO POKEDEX VALUES(26,'RAICHU','26.png','26.png','26.wav',NULL,'ELÉCTRICO',null);
INSERT INTO POKEDEX VALUES(149,'DRAGONITE','149.png','149.png','149.wav',NULL,'DRAGÓN','VOLADOR');
INSERT INTO POKEDEX VALUES(150, "MEWTWO",'150.png', '150.png', '150.wav',NULL, "PSIQUICO",NULL);
INSERT INTO POKEDEX VALUES(151, "MEW",'151.png', '151.png', '151.wav',NULL, "PSIQUICO",NULL);

CREATE TABLE ENTRENADOR(
	ID_ENTRENADOR INT,
	USUARIO VARCHAR(20) NOT NULL,
	PASSWORD VARCHAR(20) NOT NULL,
	POKEDOLLARES INT NOT NULL DEFAULT 1000,
	CONSTRAINT ENTRENADOR_PK PRIMARY KEY (ID_ENTRENADOR)
);

INSERT INTO ENTRENADOR VALUES(1, 'LUISRE','123456',1000);
INSERT INTO ENTRENADOR VALUES(2, 'ANTONIO','123456',1000);
INSERT INTO ENTRENADOR VALUES(3, 'FERNANDO','123456',1000);
	
CREATE TABLE POKEMON(
	ID_POKEMON INT,
	ID_ENTRENADOR INT,
	NUM_POKEDEX INT,
	MOTE VARCHAR(20),
	VITALIDAD INT NOT NULL,
	ATAQUE INT NOT NULL,
	ATA_ESPECIAL INT NOT NULL,
	DEFENSA  INT NOT NULL,
	DEF_ESPECIAL  INT NOT NULL,
	VELOCIDAD  INT NOT NULL,
	NIVEL  INT NOT NULL,
	FERTILIDAD INT NOT NULL CHECK (FERTILIDAD BETWEEN 0 AND 5),
	SEXO CHAR(1) NOT NULL CHECK (SEXO IN ('H','M','X')),
	ESTADO VARCHAR(20),
	EQUIPO INT NOT NULL DEFAULT 3,
	EXPERIENCIA INT,
	ID_OBJETO INT,
	CONSTRAINT POKEMON_PK PRIMARY KEY(ID_POKEMON)
);

ALTER TABLE POKEMON
ADD COLUMN


INSERT INTO POKEMON VALUES(1,1,6,NULL,120,120,120,120,120,120,30,5,'H','NORMAL',1,NULL);
INSERT INTO POKEMON VALUES(2,2,9,NULL,110,110,110,110,110,110,31,3,'H','NORMAL',1,NULL);
INSERT INTO POKEMON VALUES(3,3,6,NULL,130,100,100,100,100,100,30,5,'M','NORMAL',1,NULL);
INSERT INTO POKEMON VALUES(4,1,149,'DRAGONCITO',150,200,200,200,200,200,40,1,'X','NORMAL',1,NULL);
INSERT INTO POKEMON VALUES(5,1,9,NULL,100,95,95,95,95,95,32,4,'M','NORMAL',3,NULL);
INSERT INTO POKEMON VALUES(6,2,3,NULL,120,90,90,90,90,90,33,3,'M','NORMAL',2,NULL);
INSERT INTO POKEMON VALUES(7,3,25,NULL,100,110,110,110,110,110,41,2,'M','NORMAL',3,NULL);


ALTER TABLE POKEMON
ADD CONSTRAINT POKE_EQUIPO_CK CHECK(EQUIPO IN(1,2,3));

ALTER TABLE POKEMON
ADD CONSTRAINT POKE_POKEDEX_FK FOREIGN KEY (NUM_POKEDEX) REFERENCES POKEDEX(NUM_POKEDEX);

ALTER TABLE POKEMON
ADD CONSTRAINT POKEMON_ENTRENADOR_FK FOREIGN KEY (ID_ENTRENADOR) REFERENCES ENTRENADOR(ID_ENTRENADOR);


/*
ALTER TABLE POKEMON
ADD CONSTRAINT POKEMON_OBJETO_FK FOREIGN KEY (ID_OBJETO) REFERENCES OBJETO(ID_OBJETO);
*/


CREATE TABLE MOVIMIENTOS(
	ID_MOVIMIENTO INT,
	NOM_MOVIENTO VARCHAR(30) NOT NULL,
	NIVEL_APRENDIZAJE INT NOT NULL,
	TIPO VARCHAR(20) NOT NULL, --AGUA, FUEGO, DRAGON
	TIPO_MOV VARCHAR(20) NOT NULL, --ATAQUE, ESTADO, MEJORA
	PP_MAX INT NOT NULL,
	POTENCIA INT,
	ESTADO VARCHAR(30),--ENVENENADO, PARALIZADO,...
	TURNO INT, 
	MEJORA VARCHAR(20),--ATAQUE, VELOCIDAD
	CANTIDAD INT,
	CONSTRAINT MOVIMIENTOS_PK PRIMARY KEY (ID_MOVIMIENTO)
);

INSERT INTO MOVIMIENTOS VALUES(1,'PLACAJE',1,'NORMAL','ATAQUE',25,25,NULL,NULL,NULL,NULL);
INSERT INTO MOVIMIENTOS VALUES(2,'IMPACTRUENO',9,'ELÉCTRICO','ATAQUE',25,40,NULL,NULL,NULL,NULL);
INSERT INTO MOVIMIENTOS VALUES(3,'ASCUAS',9,'FUEGO','ATAQUE',25,50,NULL,NULL,NULL,NULL);
INSERT INTO MOVIMIENTOS VALUES(4,'DISPARO DEMORA',12,'BICHO','MEJORA',10,NULL,NULL,NULL,'VELOCIDAD',-10 );
INSERT INTO MOVIMIENTOS VALUES(5,'PSÍQUICO',30,'PSÍQUICO','ATAQUE',15,60,NULL,NULL,NULL,NULL);
INSERT INTO MOVIMIENTOS VALUES(6,'CONFUSIÓN',20,'PSÍQUICO','ATAQUE',20,60,'CONFUSO',3,NULL,NULL);
INSERT INTO MOVIMIENTOS VALUES(7,'PISTOLA AGUA',9,'AGUA','ATAQUE',25,50,NULL,NULL,NULL,NULL);
INSERT INTO MOVIMIENTOS VALUES(8,'RAYO BÚRBUJA',15,'AGUA','ATAQUE',25,40,NULL,NULL,NULL,NULL);
INSERT INTO MOVIMIENTOS VALUES(9,'LÁTIGO CEPA',9,'PLANTA','ATAQUE',25,40,NULL,NULL,NULL,NULL);
INSERT INTO MOVIMIENTOS VALUES(10,'HOJA AFILADA',15,'PLANTA','ATAQUE',25,50,NULL,NULL,NULL,NULL);
INSERT INTO MOVIMIENTOS VALUES(11,'FURIA DRAGÓN',20,'DRAGÓN','ATAQUE',20,60,NULL,NULL,NULL,NULL);


CREATE TABLE MOVIMIENTOS_POKEMON (
	ID_POKEMON INT,
	ID_MOVIMIENTO INT,
	PP INT NOT NULL,
	CONSTRAINT MOV_POK_PK PRIMARY KEY (ID_POKEMON, ID_MOVIMIENTO)
);

ALTER TABLE MOVIMIENTOS_POKEMON
ADD CONSTRAINT MOV_POKE_POKE_FK FOREIGN KEY (ID_POKEMON) REFERENCES POKEMON(ID_POKEMON);

ALTER TABLE MOVIMIENTOS_POKEMON
ADD CONSTRAINT MOV_POKE_MOV_FK FOREIGN KEY (ID_MOVIMIENTO) REFERENCES MOVIMIENTOS(ID_MOVIMIENTO);

INSERT INTO MOVIMIENTOS_POKEMON VALUES(1,1,19);
INSERT INTO MOVIMIENTOS_POKEMON VALUES(1,3,20);
INSERT INTO MOVIMIENTOS_POKEMON VALUES(1,11,12);
INSERT INTO MOVIMIENTOS_POKEMON VALUES(3,1,19);
INSERT INTO MOVIMIENTOS_POKEMON VALUES(3,3,20);
INSERT INTO MOVIMIENTOS_POKEMON VALUES(3,11,12);
INSERT INTO MOVIMIENTOS_POKEMON VALUES(2,1,10);
INSERT INTO MOVIMIENTOS_POKEMON VALUES(2,7,5);
INSERT INTO MOVIMIENTOS_POKEMON VALUES(2,8,10);
INSERT INTO MOVIMIENTOS_POKEMON VALUES(5,1,10);
INSERT INTO MOVIMIENTOS_POKEMON VALUES(5,7,2);
INSERT INTO MOVIMIENTOS_POKEMON VALUES(5,8,6);
INSERT INTO MOVIMIENTOS_POKEMON VALUES(4,1,10);
INSERT INTO MOVIMIENTOS_POKEMON VALUES(4,11,5);
INSERT INTO MOVIMIENTOS_POKEMON VALUES(6,1,10);
INSERT INTO MOVIMIENTOS_POKEMON VALUES(6,9,3);
INSERT INTO MOVIMIENTOS_POKEMON VALUES(6,10,15);
INSERT INTO MOVIMIENTOS_POKEMON VALUES(7,1,20);
INSERT INTO MOVIMIENTOS_POKEMON VALUES(7,2,20);


